<!DOCTYPE html>     
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script>
        function introducirNumeros() {
            var numeros = [];
            var fuera = false;

            do {

                var variables = prompt("Introduce los numeros" + "\n" + "pulsa f para salir");

                if (variables === "f") {
                    fuera = true;
                    break;
                } else {
                    var valores = parseInt(variables);
                    if (Number.isInteger(valores) && valores >= 0) {
                        numeros.push(valores);
                    } else {
                        alert("Introduzca un numero correcto")
                    }
                }
            } while (fuera === false)
            media(numeros);
        }

        function media(numeros) {
            var suma = 0;
            for (var i = 0; i < numeros.length; i++) {
                suma += numeros[i];
            }
            alert("La media de los números introducidos es: " + (suma / numeros.length));

            rango(numeros);

        }

        function rango(numeros) {

            var numMin = Number(numeros[0]);
            var numMax = Number(numeros[0]);
            var valorRango;

            for (var ind = 0; ind < numeros.length; ind++) {
                if (numMin > Number(numeros[ind])) {
                    numMin = Number(numeros[ind]);
                }
                if (numMax < Number(numeros[ind])) {
                    numMax = Number(numeros[ind]);
                }
            }

            valorRango = numMax - numMin;
            alert("El rango de los números introducidos es: " + valorRango);
            
            moda(numeros);

        }

        
        function moda(numeros) {
            var contador = []; // Array para almacenar veces que se repite cada número
            
            // Contar las veces que se repite cada número
            for (var i = 0; i < numeros.length; i++) {
                var encontrado = false;
                for (var j = 0; j < contador.length; j++) {
                    if (contador[j][0] == numeros[i]) {
                        contador[j][1]++; // Incrementar contador si el número ya está
                        encontrado = true;
                        break;
                    }
                }
                if (!encontrado) {
                    contador.push([numeros[i], 1]); // Si es nuevo, añadir con contador 1
                }
            }

            // Encontrar el número con la mayor frecuencia
            var maxFrecuencia = 0;
            for (var i = 0; i < contador.length; i++) {
                if (contador[i][1] > maxFrecuencia) {
                    maxFrecuencia = contador[i][1];
                }
            }

            // Verificar si no hay ningun numero que se repita (frecuencia 1)
            var mismaFrecuencia = true;
            for (var i = 0; i < contador.length; i++) {
                if (contador[i][1] !== maxFrecuencia) {
                    mismaFrecuencia = false;
                    break;
                }
                alert("No hay moda, todos los números se repiten la misma cantidad de veces.");
                return;
            }

            // Almacenar todos los números que tienen la frecuencia máxima
            var modas = [];
            for (var i = 0; i < contador.length; i++) {
                if (contador[i][1] === maxFrecuencia) {
                    modas.push(contador[i][0]);
                }
            }

            // Mostrar las modas o calcular el resultado
            if (modas.length === 1) {
                alert("La moda de los números introducidos es: " + modas[0] + " y aparece " + maxFrecuencia + " veces.");
            } else {
                // Si hay más de una moda, calcular la división entre la frecuencia y sumar los resultados
                var sumaResultados = 0;
                for (var i = 0; i < modas.length; i++) {
                    sumaResultados += modas[i] / maxFrecuencia;
                }
                alert("Los números que se repiten son: " + modas.join(", ") + ". La moda es: " + sumaResultados);
            }
        }

    </script>
</head>

<body>

    <body onload="javascript:introducirNumeros()" ;></body>

</body>

</html>